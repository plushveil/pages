<!DOCTYPE html>
<html lang="${langCode}">
  <head>
    ${(await import('../../partials/head.html')).render()}
    ${(await Promise.all(translations.map(async (langCode) => {
      return `<link rel="alternate" hreflang="${langCode}" href="${await getLanguageUrl(langCode)}">`
    }))).join('')}
    <link rel="canonical" href="/${languages}/${url}">
    ${noindex ? `<meta name="robots" content="noindex">` : ''}
    <title>${text.title} - ${text['essentials'].title}</title>
  </head>
  <body>
    ${(await import('../../partials/header/header.html')).render()}
    <section class="lg:flex container mx-auto">
      ${(await import('../../partials/table-of-contents.html')).render()}
      <main class="flex-grow p-4 order-first min-h-screen">
        ${(await import(`./essentials.${langCode}.html`)).render()}
      </main>
      ${(await import('../../partials/sidebar.html')).render()}
    </section>
    ${(await import('../../partials/footer/footer.html')).render()}
  </body>
</html>

<script target="link[rel=canonical]">
  import { getLanguages, getLanguage } from '../../scripts/translations.mjs'
  export const languages = await getLanguages()
  export const url = [...(await Promise.all(languages.map(async (langCode) => {
    return (await getLanguage(langCode))['essentials'].url
  })))].filter((arr, i, self) => self.indexOf(arr) === i)
</script>

<script target="html">
  import { getParamByName } from 'pages:info'
  import { getLanguages, getLanguage } from '../../scripts/translations.mjs'

  export * as utils from '../../scripts/utils.mjs'
  export const translations = await getLanguages()

  export const langCode = await getParamByName('languages')
  export const text = await getLanguage(langCode)
  export const noindex = !(await getParamByName('url') === text['essentials'].url)

  export async function getLanguageUrl (langCode) {
    const lang = await getLanguage(langCode)
    return `/${langCode}/${lang['essentials'].url}/`
  }
</script>
